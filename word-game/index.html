<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Alphabet Game</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    #question { font-size: 28px; margin: 20px 0; }
    #message { font-size: 20px; margin: 10px; height: 24px; }
    #scoreBoard { margin-top: 15px; font-size: 18px; }
    select, input { padding: 8px; font-size: 16px; margin: 5px; }
    #timer { font-size: 22px; margin: 15px; }
    #timeup { font-size: 26px; color: red; margin-top: 15px; display: none; }
  </style>
</head>
<body>
  <h1>Alphabet Game</h1>

  <label for="mode">Select Mode:</label>
  <select id="mode">
    <option value="MIX" selected>Mix</option>
    <option value="L2P">Alphabet ‚Üí Position</option>
    <option value="P2L">Position ‚Üí Alphabet</option>
    <option value="P2LR">Position ‚Üí Alphabet (Reverse)</option>
    <option value="ADD">Addition / Subtraction</option>
  </select>

  <div id="timer">‚è≥ Time: 59</div>
  <div id="question"></div>

  <input type="text" id="answer" autocomplete="off" placeholder="Type answer" />
  <div id="message"></div>

  <div id="scoreBoard">
    ‚úÖ Correct: <span id="correct">0</span> |
    ‚ùå Wrong: <span id="wrong">0</span> |
    ‚≠ê Score: <span id="score">0</span><br>
    üèÜ High Score: <span id="highscore">0</span>
  </div>

  <div id="timeup">‚è≥ Time's up!</div>

<script>
const qDiv = document.getElementById("question");
const ansInput = document.getElementById("answer");
const msgDiv = document.getElementById("message");
const correctSpan = document.getElementById("correct");
const wrongSpan = document.getElementById("wrong");
const scoreSpan = document.getElementById("score");
const highscoreSpan = document.getElementById("highscore");
const modeSel = document.getElementById("mode");
const timerDiv = document.getElementById("timer");
const timeupDiv = document.getElementById("timeup");

let correct = 0, wrong = 0, score = 0;
let current = {};
let time = 59;
let timer;
let mode = "MIX";

const highscores = JSON.parse(localStorage.getItem("alphaHighScores") || "{}");

function saveHighScore() {
  if (!highscores[mode] || score > highscores[mode]) {
    highscores[mode] = score;
    localStorage.setItem("alphaHighScores", JSON.stringify(highscores));
  }
}

function getHighScore(m) {
  return highscores[m] || 0;
}

function randInt(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function letterAt(n){return String.fromCharCode(64+n);}
function posOf(ch){return ch.toUpperCase().charCodeAt(0)-64;}

function newQuestion(){
  msgDiv.textContent="";
  let m = mode;
  if(m==="MIX"){
    const arr=["L2P","P2L","P2LR","ADD"];
    m = arr[randInt(0,arr.length-1)];
  }
  if(m==="L2P"){
    let l=letterAt(randInt(1,26));
    qDiv.textContent=`Position of ${l}?`;
    current.answer=posOf(l).toString();
  } else if(m==="P2L"){
    let p=randInt(1,26);
    qDiv.textContent=`Alphabet at position ${p}?`;
    current.answer=letterAt(p).toUpperCase();
  } else if(m==="P2LR"){
    let p=randInt(1,26);
    qDiv.textContent=`Alphabet at reverse position ${p}?`;
    current.answer=letterAt(27-p).toUpperCase();
  } else if(m==="ADD"){
    if(Math.random()<0.5){
      // letter ¬± number
      let l=letterAt(randInt(1,26));
      let n=randInt(1,25);
      let op=Math.random()<0.5?"+":"-";
      let res=posOf(l)+(op==="+"?n:-n);
      while(res<1)res+=26; while(res>26)res-=26;
      qDiv.textContent=`${l} ${op} ${n} = ?`;
      current.answer=letterAt(res);
    }else{
      // letter ¬± letter (subtraction always bigger - smaller)
      let a=randInt(1,26), b=randInt(1,26);
      if(a<b)[a,b]=[b,a];
      let op=Math.random()<0.5?"+":"-";
      let res=op==="+"?a+b:a-b;
      while(res<1)res+=26; while(res>26)res-=26;
      qDiv.textContent=`${letterAt(a)} ${op} ${letterAt(b)} = ?`;
      current.answer=letterAt(res);
    }
  }
  ansInput.value="";
  ansInput.focus();
}

function checkAnswer(){
  if(ansInput.disabled) return;
  let val=ansInput.value.trim().toUpperCase();
  if(!val) return;
  if(val===current.answer){
    correct++;
    msgDiv.textContent="‚úÖ Right!";
  } else {
    wrong++;
    msgDiv.textContent="‚ùå Wrong!";
  }
  score=3*correct - wrong;
  correctSpan.textContent=correct;
  wrongSpan.textContent=wrong;
  scoreSpan.textContent=score;
  newQuestion();
}

function startGame(){
  clearInterval(timer);
  correct=wrong=score=0;
  correctSpan.textContent=0;
  wrongSpan.textContent=0;
  scoreSpan.textContent=0;
  msgDiv.textContent="";
  timeupDiv.style.display="none";
  ansInput.disabled=false;
  time=59;
  timerDiv.textContent="‚è≥ Time: "+time;
  highscoreSpan.textContent=getHighScore(mode);
  newQuestion();
  timer=setInterval(()=>{
    time--;
    timerDiv.textContent="‚è≥ Time: "+time;
    if(time<=0){
      clearInterval(timer);
      saveHighScore();
      highscoreSpan.textContent=getHighScore(mode);
      ansInput.disabled=true;
      timeupDiv.style.display="block";
    }
  },1000);
}

ansInput.addEventListener("keydown",e=>{
  if(e.key==="Enter") checkAnswer();
});

modeSel.addEventListener("change",()=>{
  mode=modeSel.value;
  startGame();
});

mode=modeSel.value; // default MIX
startGame();
</script>
</body>
</html>